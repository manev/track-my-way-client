{"version":3,"file":"register.component.js","sourceRoot":"","sources":["register.component.ts"],"names":[],"mappings":"AAAA,8DAA8D;;;;;;;;;;;AAK9D,8BAAkC,eAAe,CAAC,CAAA;AAElD,kCAAuB,kCAAkC,CAAC,CAAA;AAC1D,oCAAqB,oCAAoC,CAAC,CAAA;AAC1D,qBAAiB,qBAAqB,CAAC,CAAA;AACvC,qBAAmB,qBAAqB,CAAC,CAAA;AACzC,mCAAgC,gCAAgC,CAAC,CAAA;AAKjE;IACI,sBAAoB,UAAsB,EAC9B,QAAkB,EAClB,GAAkB;QAFV,eAAU,GAAV,UAAU,CAAY;QAC9B,aAAQ,GAAR,QAAQ,CAAU;QAClB,QAAG,GAAH,GAAG,CAAe;QAwB9B,SAAI,GAAG,IAAI,WAAI,EAAE,CAAC;IAxBgB,CAAC;IAEnC,+BAAQ,GAAR;QAAA,iBAWC;QAVG,IAAI,CAAC,aAAa,GAAG,cAAI,CAAC,eAAe,EAAE,CAAC;QAE5C,EAAE,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YAC1B,SAAS,CAAC,aAAa,CAAC,aAAa,CAAC,UAAA,MAAM;gBACxC,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACnC,KAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,EAAE,IAAI,CAAC,CAAC;QACb,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAA;QAChC,CAAC;IACL,CAAC;IAED,+BAAQ,GAAR;QAAA,iBAOC;QANG,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,MAAM,KAAK,KAAI,CAAC,IAAI,CAAC,WAAW,EAArC,CAAqC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE1F,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QACjF,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,sCAAiB,CAAC,CAAC;IACxC,CAAC;IA5BL;QAAC,oBAAI,CAAC;YACF,WAAW,EAAE,cAAI,CAAC,cAAc,CAAC,cAAc,CAAC;SACnD,CAAC;;oBAAA;IA8BF,mBAAC;AAAD,CAAC,AA7BD,IA6BC;AA7BY,oBAAY,eA6BxB,CAAA","sourcesContent":["/// <reference path=\"../../../typings/cordova/cordova.d.ts\" />\r\n\r\nimport {NgForm} from \"angular2/common\";\r\nimport {OnInit, EventEmitter} from \"@angular/core\";\r\n\r\nimport {Page, NavController} from 'ionic-angular';\r\n\r\nimport ServerHost from \"../../services/serverHostManager\";\r\nimport Settings from \"../../services/localDeviceSettings\";\r\nimport Util from \"../../services/util\";\r\nimport {User} from \"../../services/user\";\r\nimport {ContactsComponent} from \"../contacts/contacts.component\";\r\n\r\n@Page({\r\n    templateUrl: Util.GetTemplateUri(\"registration\")\r\n})\r\nexport class Registration implements OnInit {\r\n    constructor(private serverHost: ServerHost,\r\n        private settings: Settings,\r\n        private nav: NavController) { }\r\n\r\n    ngOnInit() {\r\n        this.countriesInfo = Util.GetAllCountries();\r\n\r\n        if (navigator.globalization) {\r\n            navigator.globalization.getLocaleName(result => {\r\n                let code = result.value.split('-');\r\n                this.user.CountryCode = code.length === 1 ? code[0] : code[1];\r\n            }, null);\r\n        } else {\r\n            this.user.CountryCode = \"bg\"\r\n        }\r\n    }\r\n\r\n    register() {\r\n        let country = this.countriesInfo.filter(item => item.alpha2 === this.user.CountryCode)[0];\r\n\r\n        this.user.Phone.Number = country.countryCallingCodes[0] + this.user.Phone.Number;\r\n        this.settings.setCurrentUser(this.user);\r\n        this.serverHost.registerUser();\r\n        this.nav.setRoot(ContactsComponent);\r\n    }\r\n\r\n    user = new User();\r\n    countriesInfo: any;\r\n}\t"]}
